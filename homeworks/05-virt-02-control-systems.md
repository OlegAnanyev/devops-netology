# Домашнее задание к занятию "5.2. Системы управления виртуализацией"

## Задача 1 

Выберете подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

* 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований

`Самый сложный случай для однозначного выбора, т.к. в равной мере такая инфраструктура может строиться на базе Hyper-V / VMWare / KVM / Xen в случае, если предпочтительно использовать собственные сервера, либо на AWS EC2 / Azure Virtual Machines, если удобнее и выгоднее облачное решение.`

* Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий

`Тут, на мой взгляд, как и в предыдущем пункте в равной мере можно использовать Hyper-V / VMWare либо AWS EC2 / Azure Virtual Machines, однако использование KVM / Xen уже будет менее удобно, в виду того, что используется Windows based инфраструктура.`

* Требуется наиболее производительное бесплатное opensource решение для виртуализации небольшой (20 серверов) инфраструктуры Linux и Windows виртуальных машин

`Здесь хорошим выбором будет KVM, но также можно рассмотреть Xen.`

* Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры

`В данном случае я бы однозначно выбрал Hyper-V, т.к. бесплатные варианты продуктов VMWare сильно урезаны по функциональности.`

* Необходимо рабочее окружение для тестирование программного продукта на нескольких дистрибутивах Linux

`Для решения данной задачи удобно использовать связку Vagrant + VirtualBox, т.к. она бесплатна и предоставляет удобные средства для автоматического создания виртуальных машин с необходимой конфигурацией, что должно быть удобно для тестирования.`



## Задача 2

Опишите сценарий миграции с VMware vSphere на Hyper-V для Linux и Windows виртуальных машин. Детально опишите необходимые шаги для использования всех преимуществ Hyper-V для Windows.
---

`Ключевой задачей в миграции виртуальной машины с VMware vSphere на Hyper-V будет конвертация файла жёсткого диска виртуалки из формата VMDK в формат VHD или более современный VHDX. Сделать это можно с помощью утилит vhdtool.exe и vhdxtool.exe. Далее необходимо создать в Hyper-V виртуальную машину с параметрами оборудования, соответствующими тому, что было в VMware vSphere и подключить к ней сконвертированный образ жёсткого диска.
И уже после перехода на Hyper-V становятся доступны такие преимущества как VM host live migration, VM storage live migration, QoS для хранилища/сети, проброс оборудования, горячее добавление дисков и ОЗУ.`


## Задача 3 

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был бы выбор, то создавали ли вы бы гетерогенную среду или нет? Мотивируйте ваш ответ примерами. 
---
`Гетерогенная среда виртуализации на мой взгляд может порождать в работе большое число проблем или как минимум неудобств, поэтому по возможности такого сценария построения инфраструктуры следует избегать. Если не рассматривать сосуществаование конкретных гипервизоров, а обратить внимание на общие проблемы гетерогенности среды, то в первую очередь необходимо учесть:`
- избыточное потребление ресурсов для обеспечения работы нескольких гипервизоров
- различные форматы хранения конфигураций виртуальных машин и форматы образов жёстких дисков
- несколько решений реализации стевого стека под каждый гипервизор, которые будут работать с одним физическим железом
- инструменты резервного копирования должны поддерживать все используемые системы, либо требуется организовывать свой сценарий резервного копирования для каждого гипервизора
- необходимость лицензирования (для коммерческих решений) и регулярного обновления актуальна для каждого используемого гипервизора
- в целом все скрипты/инструменты/приложения, работающие вне виртуальных машин и как-либо с ними взаимодействующие, должны будут учитывать особенности всех гипервизоров

`Если нет возможности избежать использования гетерогенной среды виртуализации, следует хотя бы максимально разграничить области их применения: к примеру строить всю инфраструктуру на базе Hyper-V и ограниченно использовать VMWare для виртуализации машин, требующих проброса USB-устройств (что не умеет Hyper-V). Особенно важно избегать прямого использования нескольких  гипервизоров на одном физическом сервере.`
